<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Partner Match</title><link rel="stylesheet" href="styles.css">
<style>.err{color:#b91c1c;background:#3d1212;border:1px solid #5f1b1b;padding:8px;border-radius:10px;margin-bottom:8px}</style>
</head><body>
<div class="topbar"><div class="container row"><div class="brand">FortuneFlow</div><nav>
<a href="index.html">Home</a><a href="report.html">Report</a><a href="match.html" aria-current="page">Partner Match</a><a href="pricing.html">Pricing</a><a href="account.html">Account</a>
</nav></div></div>
<div class="container"><h1>Partner Match</h1>
<section class="card"><div id="err" class="err" style="display:none"></div>
<div class="grid cols-2">
  <div><h3>You</h3><div class="grid cols-2">
    <div><label>Country</label><select id="a-country"><option value="CN" selected>China</option><option value="US">United States</option><option value="CA">Canada</option><option value="UK">United Kingdom</option><option value="AU">Australia</option><option value="DE">Germany</option><option value="FR">France</option><option value="ES">Spain</option></select></div>
    <div><label>Hour (optional)</label><select id="a-hour"><option value="">Unknown</option><option value="1">01:00</option><option value="3">03:00</option><option value="5">05:00</option><option value="7">07:00</option><option value="9">09:00</option><option value="11">11:00</option><option value="13">13:00</option><option value="15">15:00</option><option value="17">17:00</option><option value="19">19:00</option><option value="21">21:00</option><option value="23">23:00</option></select></div>
    <div><label>Year</label><input id="a-y" type="number" min="1900" max="2100" placeholder="1988"></div>
    <div><label>Month</label><input id="a-m" type="number" min="1" max="12" placeholder="7"></div>
    <div><label>Day</label><input id="a-d" type="number" min="1" max="31" placeholder="15"></div>
  </div></div>
  <div><h3>Partner</h3><div class="grid cols-2">
    <div><label>Country</label><select id="b-country"><option value="CN" selected>China</option><option value="US">United States</option><option value="CA">Canada</option><option value="UK">United Kingdom</option><option value="AU">Australia</option><option value="DE">Germany</option><option value="FR">France</option><option value="ES">Spain</option></select></div>
    <div><label>Hour (optional)</label><select id="b-hour"><option value="">Unknown</option><option value="1">01:00</option><option value="3">03:00</option><option value="5">05:00</option><option value="7">07:00</option><option value="9">09:00</option><option value="11">11:00</option><option value="13">13:00</option><option value="15">15:00</option><option value="17">17:00</option><option value="19">19:00</option><option value="21">21:00</option><option value="23">23:00</option></select></div>
    <div><label>Year</label><input id="b-y" type="number" min="1900" max="2100" placeholder="1990"></div>
    <div><label>Month</label><input id="b-m" type="number" min="1" max="12" placeholder="8"></div>
    <div><label>Day</label><input id="b-d" type="number" min="1" max="31" placeholder="20"></div>
  </div></div>
</div>
<div style="margin-top:12px"><button id="calc">Calculate Score</button></div>
<div id="score" style="margin-top:14px;font-size:22px;font-weight:800"></div>
<div id="explain" class="small" style="margin-top:8px"></div>
</section>
<section class="card small"><b>Note</b>: We use local civil date; hour optional. Country is for future time‑zone refinement.</section>
</div>
<script src="partner_match.js"></script>
<script>
const setErr=(m)=>{const e=document.getElementById('err');e.textContent=m;e.style.display='block';}
const clearErr=()=>{const e=document.getElementById('err');e.textContent='';e.style.display='none';}
document.addEventListener('DOMContentLoaded',()=>{
  document.getElementById('calc').addEventListener('click',()=>{
    clearErr();
    const ay=parseInt(document.getElementById('a-y').value,10);
    const am=parseInt(document.getElementById('a-m').value,10);
    const ad=parseInt(document.getElementById('a-d').value,10);
    const ah=document.getElementById('a-hour').value;
    const by=parseInt(document.getElementById('b-y').value,10);
    const bm=parseInt(document.getElementById('b-m').value,10);
    const bd=parseInt(document.getElementById('b-d').value,10);
    const bh=document.getElementById('b-hour').value;
    if(!(ay&&am&&ad&&by&&bm&&bd)){ setErr('Please fill Year/Month/Day for both sides.'); return; }
    try{
      const A=buildPillars(ay,am,ad,ah), B=buildPillars(by,bm,bd,bh);
      const Ac=countsFromPillars(A), Bc=countsFromPillars(B);
      const det={a:{ds:A.d[0],db:A.d[1]}, b:{ds:B.d[0],db:B.d[1]}};
      const r=score(Ac,Bc,det);
      const label=r.total>=85?'Excellent':r.total>=70?'Good':r.total>=50?'Neutral':'Challenging';
      document.getElementById('score').textContent='Score: '+r.total+' / 100 — '+label;
      const bullets=[];
      bullets.push('You lack: '+r.domA.least+' | Partner strong: '+r.domB.most);
      bullets.push('Balance bonus: '+r.detail.balance);
      if(r.detail.rel>=12) bullets.push('Heavenly combination — long-term harmony');
      else if(r.detail.rel>=6) bullets.push('Six-harmony — good chemistry');
      bullets.push('Day-stem relation: '+r.detail.stemScore);
      document.getElementById('explain').innerHTML=bullets.map(x=>'• '+x).join('<br>');
    }catch(err){ setErr(err.message||String(err)); }
  });
});
</script>
</body></html>