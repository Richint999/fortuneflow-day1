<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Partner Match</title>
<!-- 放在 match/index.html 中：<h1>Partner Match</h1> 下面 -->
<section id="pm-brief-card" class="card" style="margin-top:12px;">
  <h2>Partner Match — Generating &amp; Balance</h2>
  <p>
    We compare two BaZi profiles as Five-Element vectors. Compatibility rises when one partner’s dominant
    elements <b>generate</b> the other’s deficits along the Sheng cycle (Wood→Fire→Earth→Metal→Water→Wood),
    and falls when links are mainly <b>controlling</b> (Ke: Wood⊣Earth, Earth⊣Water, Water⊣Fire, Fire⊣Metal, Metal⊣Wood).
    Month/day carry more weight; an unknown hour is assumed at noon with reduced influence. The final score 
    reflects net generation vs. control and how close the pair moves toward balance.
  </p>
</section>

 <style>
    :root{--bg:#0b1324;--panel:#0f1a32;--txt:#e6eefc;--muted:#a7b3c9;--line:#203052;--btn:#1e2f57}
    *{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--txt);font-family:system-ui}
    a{color:#9cc3ff;text-decoration:none}
    .button,button{display:inline-flex;align-items:center;background:var(--btn);color:#fff;padding:10px 14px;border-radius:12px;border:1px solid var(--line);cursor:pointer}
    .container{max-width:900px;margin:24px auto;padding:0 16px}
    .topbar{background:rgba(11,19,36,.92);border-bottom:1px solid var(--line)}
    .topbar .row{display:flex;justify-content:space-between;align-items:center;padding:10px 0}.brand{font-weight:800}
    nav a{margin:0 8px;padding:8px;border-radius:10px}nav a:hover{background:rgba(255,255,255,.06)}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:18px;margin:16px 0}
    .grid{display:grid;gap:14px}.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    label{display:block;margin-bottom:6px;font-size:14px;color:#d2e0ff}select,input{width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:#0b1020;color:#e6eefc}
    .small{font-size:13px;color:#a7b3c9}
    .err{color:#b91c1c;background:#3d1212;border:1px solid #5f1b1b;padding:8px;border-radius:10px;margin-bottom:10px;display:none}
  </style>
</head>
<body>
  <div class="topbar">
    <div class="container row">
      <div class="brand">FortuneFlow</div>
      <nav>
        <a href="../index.html">Know Yourself</a>
        <a href="../report.html">Report</a>
        <a href="../pricing.html">Pricing</a>
        <a href="../account.html">Account</a>
      </nav>
    </div>
  </div>

  <div class="container">
    <h1>Partner Match</h1>
    <section class="card">
      <div id="err" class="err"></div>
      <div class="grid cols-2">
        <div>
          <h3>You</h3>
          <div class="grid cols-2">
            <div><label>Country</label>
              <select id="a-country"><option>USA - Los Angeles (-480/-420)</option>
<option>USA - Phoenix (-420)</option>
<option>USA - Denver (-420/-360)</option>
<option>USA - Chicago (-360/-300)</option>
<option>USA - New York (-300/-240)</option>
<option>USA - Anchorage (-540/-480)</option>
<option>USA - Honolulu (-600)</option>
<option>Canada - Vancouver (-480/-420)</option>
<option>Canada - Edmonton (-420/-360)</option>
<option>Canada - Winnipeg (-360/-300)</option>
<option>Canada - Toronto (-300/-240)</option>
<option>Canada - Halifax (-240/-180)</option>
<option>Canada - St. John's (-210/-150)</option>
<option>Mexico - Tijuana (-480/-420)</option>
<option>Mexico City (-360)</option>
<option>Guatemala</option>
<option>Honduras</option>
<option>El Salvador</option>
<option>Nicaragua</option>
<option>Costa Rica</option>
<option>Belize</option>
<option>Panama</option>
<option>Jamaica</option>
<option>Colombia</option>
<option>Peru</option>
<option>Ecuador</option>
<option>Venezuela</option>
<option>Dominican Republic</option>
<option>Barbados</option>
<option>Trinidad and Tobago</option>
<option>Antigua and Barbuda</option>
<option>Grenada</option>
<option>Dominica</option>
<option>Saint Lucia</option>
<option>Saint Kitts and Nevis</option>
<option>Saint Vincent and the Grenadines</option>
<option>Aruba</option>
<option>Curaçao</option>
<option>Bolivia</option>
<option>Paraguay</option>
<option>Chile - Santiago</option>
<option>Argentina</option>
<option>Uruguay</option>
<option>Suriname</option>
<option>Brazil - São Paulo</option>
<option>Greenland - Nuuk</option>
<option>Cuba</option>
<option>Haiti</option>
<option>Bahamas</option>
<option>Cabo Verde</option>
<option>United Kingdom</option>
<option>Ireland</option>
<option>Portugal (Mainland)</option>
<option>Iceland</option>
<option>Spain</option>
<option>France</option>
<option>Germany</option>
<option>Italy</option>
<option>Netherlands</option>
<option>Belgium</option>
<option>Luxembourg</option>
<option>Switzerland</option>
<option>Austria</option>
<option>Poland</option>
<option>Czechia (Czech Republic)</option>
<option>Slovakia</option>
<option>Hungary</option>
<option>Slovenia</option>
<option>Croatia</option>
<option>Bosnia and Herzegovina</option>
<option>Serbia</option>
<option>Montenegro</option>
<option>North Macedonia</option>
<option>Albania</option>
<option>Andorra</option>
<option>Monaco</option>
<option>San Marino</option>
<option>Vatican City</option>
<option>Norway</option>
<option>Sweden</option>
<option>Denmark</option>
<option>Liechtenstein</option>
<option>Greece</option>
<option>Finland</option>
<option>Romania</option>
<option>Bulgaria</option>
<option>Estonia</option>
<option>Latvia</option>
<option>Lithuania</option>
<option>Moldova</option>
<option>Ukraine</option>
<option>Cyprus</option>
<option>Russia - Kaliningrad</option>
<option>Belarus</option>
<option>Russia - Moscow</option>
<option>Russia - Samara</option>
<option>Russia - Yekaterinburg</option>
<option>Russia - Omsk</option>
<option>Russia - Novosibirsk</option>
<option>Russia - Krasnoyarsk</option>
<option>Russia - Irkutsk</option>
<option>Russia - Yakutsk</option>
<option>Russia - Vladivostok</option>
<option>Russia - Magadan</option>
<option>Russia - Kamchatka</option>
<option>Morocco</option>
<option>Algeria</option>
<option>Tunisia</option>
<option>Libya</option>
<option>Egypt</option>
<option>Sudan</option>
<option>Israel</option>
<option>Jordan</option>
<option>Lebanon</option>
<option>Syria</option>
<option>Turkey</option>
<option>Iraq</option>
<option>Saudi Arabia</option>
<option>Bahrain</option>
<option>Qatar</option>
<option>Kuwait</option>
<option>Yemen</option>
<option>United Arab Emirates</option>
<option>Oman</option>
<option>Iran</option>
<option>Western Sahara</option>
<option>Mauritania</option>
<option>Mali</option>
<option>Senegal</option>
<option>Gambia</option>
<option>Guinea-Bissau</option>
<option>Guinea</option>
<option>Sierra Leone</option>
<option>Liberia</option>
<option>Ghana</option>
<option>Burkina Faso</option>
<option>São Tomé and Príncipe</option>
<option>Benin</option>
<option>Togo</option>
<option>Nigeria</option>
<option>Niger</option>
<option>Cameroon</option>
<option>Gabon</option>
<option>Congo (Congo-Brazzaville)</option>
<option>Equatorial Guinea</option>
<option>Central African Republic</option>
<option>Chad</option>
<option>Namibia</option>
<option>Angola</option>
<option>South Africa</option>
<option>Botswana</option>
<option>Lesotho</option>
<option>Eswatini</option>
<option>Zimbabwe</option>
<option>Zambia</option>
<option>Malawi</option>
<option>Mozambique</option>
<option>Burundi</option>
<option>Rwanda</option>
<option>DR Congo - Kinshasa</option>
<option>DR Congo - Lubumbashi</option>
<option>Uganda</option>
<option>Kenya</option>
<option>Tanzania</option>
<option>Ethiopia</option>
<option>Eritrea</option>
<option>Somalia</option>
<option>Madagascar</option>
<option>Comoros</option>
<option>Mayotte</option>
<option>South Sudan</option>
<option>Armenia</option>
<option>Azerbaijan</option>
<option>Georgia</option>
<option>Afghanistan</option>
<option>Pakistan</option>
<option>Uzbekistan</option>
<option>Turkmenistan</option>
<option>Tajikistan</option>
<option>Kyrgyzstan</option>
<option>Kazakhstan - Almaty</option>
<option>Kazakhstan - Astana</option>
<option>India</option>
<option>Sri Lanka</option>
<option>Nepal</option>
<option>Bangladesh</option>
<option>Bhutan</option>
<option>Maldives</option>
<option>Myanmar (Burma)</option>
<option>Thailand</option>
<option>Vietnam</option>
<option>Cambodia</option>
<option>Laos</option>
<option>Indonesia - Jakarta</option>
<option>Malaysia</option>
<option>Singapore</option>
<option>Brunei</option>
<option>Philippines</option>
<option>China</option>
<option>Hong Kong</option>
<option>Macao</option>
<option>Taiwan</option>
<option>Indonesia - Bali</option>
<option>Japan</option>
<option>South Korea</option>
<option>North Korea</option>
<option>Palau</option>
<option>East Timor (Timor-Leste)</option>
<option>Indonesia - Jayapura</option>
<option>Australia - Darwin (+09:30)</option>
<option>Australia - Adelaide (+09:30/+10:30)</option>
<option>Australia - Brisbane (+10:00)</option>
<option>Australia - Sydney (+10:00/+11:00)</option>
<option>Australia - Melbourne (+10:00/+11:00)</option>
<option>Australia - Hobart (+10:00/+11:00)</option>
<option>Papua New Guinea</option>
<option>Solomon Islands</option>
<option>New Caledonia</option>
<option>Vanuatu</option>
<option>Fiji</option>
<option>New Zealand - Wellington (+12/+13)</option>
<option>Samoa</option>
<option>Tonga</option>
<option>Kiribati - Tarawa</option>
<option>Kiribati - Kiritimati (+14:00)</option>
<option>Marshall Islands</option>
<option>Micronesia - Pohnpei</option>
<option>Micronesia - Chuuk</option>
<option>Nauru</option>
<option>Tuvalu</option>
<option>Wallis and Futuna</option>
<option>French Polynesia - Tahiti</option>
<option>Cook Islands</option>
<option>American Samoa</option>
<option>Niue</option></select>
            </div>
            <div><label>Hour (optional)</label>
              <select id="a-hour"><option value="">Unknown</option>
<option value="00:00">Zi (23:00–01:00)</option>
<option value="02:00">Chou (01:00–03:00)</option>
<option value="04:00">Yin (03:00–05:00)</option>
<option value="06:00">Mao (05:00–07:00)</option>
<option value="08:00">Chen (07:00–09:00)</option>
<option value="10:00">Si (09:00–11:00)</option>
<option value="12:00" selected>Wu (11:00–13:00)</option>
<option value="14:00">Wei (13:00–15:00)</option>
<option value="16:00">Shen (15:00–17:00)</option>
<option value="18:00">You (17:00–19:00)</option>
<option value="20:00">Xu (19:00–21:00)</option>
<option value="22:00">Hai (21:00–23:00)</option></select>
            </div>
            <div><label>Year</label><input id="a-y" type="number" min="1900" max="2100" placeholder="1988"></div>
            <div><label>Month</label><input id="a-m" type="number" min="1" max="12" placeholder="7"></div>
            <div><label>Day</label><input id="a-d" type="number" min="1" max="31" placeholder="15"></div>
          </div>
        </div>
        <div>
          <h3>Partner</h3>
          <div class="grid cols-2">
            <div><label>Country</label>
              <select id="b-country"><option>USA - Los Angeles (-480/-420)</option>
<option>USA - Phoenix (-420)</option>
<option>USA - Denver (-420/-360)</option>
<option>USA - Chicago (-360/-300)</option>
<option>USA - New York (-300/-240)</option>
<option>USA - Anchorage (-540/-480)</option>
<option>USA - Honolulu (-600)</option>
<option>Canada - Vancouver (-480/-420)</option>
<option>Canada - Edmonton (-420/-360)</option>
<option>Canada - Winnipeg (-360/-300)</option>
<option>Canada - Toronto (-300/-240)</option>
<option>Canada - Halifax (-240/-180)</option>
<option>Canada - St. John's (-210/-150)</option>
<option>Mexico - Tijuana (-480/-420)</option>
<option>Mexico City (-360)</option>
<option>Guatemala</option>
<option>Honduras</option>
<option>El Salvador</option>
<option>Nicaragua</option>
<option>Costa Rica</option>
<option>Belize</option>
<option>Panama</option>
<option>Jamaica</option>
<option>Colombia</option>
<option>Peru</option>
<option>Ecuador</option>
<option>Venezuela</option>
<option>Dominican Republic</option>
<option>Barbados</option>
<option>Trinidad and Tobago</option>
<option>Antigua and Barbuda</option>
<option>Grenada</option>
<option>Dominica</option>
<option>Saint Lucia</option>
<option>Saint Kitts and Nevis</option>
<option>Saint Vincent and the Grenadines</option>
<option>Aruba</option>
<option>Curaçao</option>
<option>Bolivia</option>
<option>Paraguay</option>
<option>Chile - Santiago</option>
<option>Argentina</option>
<option>Uruguay</option>
<option>Suriname</option>
<option>Brazil - São Paulo</option>
<option>Greenland - Nuuk</option>
<option>Cuba</option>
<option>Haiti</option>
<option>Bahamas</option>
<option>Cabo Verde</option>
<option>United Kingdom</option>
<option>Ireland</option>
<option>Portugal (Mainland)</option>
<option>Iceland</option>
<option>Spain</option>
<option>France</option>
<option>Germany</option>
<option>Italy</option>
<option>Netherlands</option>
<option>Belgium</option>
<option>Luxembourg</option>
<option>Switzerland</option>
<option>Austria</option>
<option>Poland</option>
<option>Czechia (Czech Republic)</option>
<option>Slovakia</option>
<option>Hungary</option>
<option>Slovenia</option>
<option>Croatia</option>
<option>Bosnia and Herzegovina</option>
<option>Serbia</option>
<option>Montenegro</option>
<option>North Macedonia</option>
<option>Albania</option>
<option>Andorra</option>
<option>Monaco</option>
<option>San Marino</option>
<option>Vatican City</option>
<option>Norway</option>
<option>Sweden</option>
<option>Denmark</option>
<option>Liechtenstein</option>
<option>Greece</option>
<option>Finland</option>
<option>Romania</option>
<option>Bulgaria</option>
<option>Estonia</option>
<option>Latvia</option>
<option>Lithuania</option>
<option>Moldova</option>
<option>Ukraine</option>
<option>Cyprus</option>
<option>Russia - Kaliningrad</option>
<option>Belarus</option>
<option>Russia - Moscow</option>
<option>Russia - Samara</option>
<option>Russia - Yekaterinburg</option>
<option>Russia - Omsk</option>
<option>Russia - Novosibirsk</option>
<option>Russia - Krasnoyarsk</option>
<option>Russia - Irkutsk</option>
<option>Russia - Yakutsk</option>
<option>Russia - Vladivostok</option>
<option>Russia - Magadan</option>
<option>Russia - Kamchatka</option>
<option>Morocco</option>
<option>Algeria</option>
<option>Tunisia</option>
<option>Libya</option>
<option>Egypt</option>
<option>Sudan</option>
<option>Israel</option>
<option>Jordan</option>
<option>Lebanon</option>
<option>Syria</option>
<option>Turkey</option>
<option>Iraq</option>
<option>Saudi Arabia</option>
<option>Bahrain</option>
<option>Qatar</option>
<option>Kuwait</option>
<option>Yemen</option>
<option>United Arab Emirates</option>
<option>Oman</option>
<option>Iran</option>
<option>Western Sahara</option>
<option>Mauritania</option>
<option>Mali</option>
<option>Senegal</option>
<option>Gambia</option>
<option>Guinea-Bissau</option>
<option>Guinea</option>
<option>Sierra Leone</option>
<option>Liberia</option>
<option>Ghana</option>
<option>Burkina Faso</option>
<option>São Tomé and Príncipe</option>
<option>Benin</option>
<option>Togo</option>
<option>Nigeria</option>
<option>Niger</option>
<option>Cameroon</option>
<option>Gabon</option>
<option>Congo (Congo-Brazzaville)</option>
<option>Equatorial Guinea</option>
<option>Central African Republic</option>
<option>Chad</option>
<option>Namibia</option>
<option>Angola</option>
<option>South Africa</option>
<option>Botswana</option>
<option>Lesotho</option>
<option>Eswatini</option>
<option>Zimbabwe</option>
<option>Zambia</option>
<option>Malawi</option>
<option>Mozambique</option>
<option>Burundi</option>
<option>Rwanda</option>
<option>DR Congo - Kinshasa</option>
<option>DR Congo - Lubumbashi</option>
<option>Uganda</option>
<option>Kenya</option>
<option>Tanzania</option>
<option>Ethiopia</option>
<option>Eritrea</option>
<option>Somalia</option>
<option>Madagascar</option>
<option>Comoros</option>
<option>Mayotte</option>
<option>South Sudan</option>
<option>Armenia</option>
<option>Azerbaijan</option>
<option>Georgia</option>
<option>Afghanistan</option>
<option>Pakistan</option>
<option>Uzbekistan</option>
<option>Turkmenistan</option>
<option>Tajikistan</option>
<option>Kyrgyzstan</option>
<option>Kazakhstan - Almaty</option>
<option>Kazakhstan - Astana</option>
<option>India</option>
<option>Sri Lanka</option>
<option>Nepal</option>
<option>Bangladesh</option>
<option>Bhutan</option>
<option>Maldives</option>
<option>Myanmar (Burma)</option>
<option>Thailand</option>
<option>Vietnam</option>
<option>Cambodia</option>
<option>Laos</option>
<option>Indonesia - Jakarta</option>
<option>Malaysia</option>
<option>Singapore</option>
<option>Brunei</option>
<option>Philippines</option>
<option>China</option>
<option>Hong Kong</option>
<option>Macao</option>
<option>Taiwan</option>
<option>Indonesia - Bali</option>
<option>Japan</option>
<option>South Korea</option>
<option>North Korea</option>
<option>Palau</option>
<option>East Timor (Timor-Leste)</option>
<option>Indonesia - Jayapura</option>
<option>Australia - Darwin (+09:30)</option>
<option>Australia - Adelaide (+09:30/+10:30)</option>
<option>Australia - Brisbane (+10:00)</option>
<option>Australia - Sydney (+10:00/+11:00)</option>
<option>Australia - Melbourne (+10:00/+11:00)</option>
<option>Australia - Hobart (+10:00/+11:00)</option>
<option>Papua New Guinea</option>
<option>Solomon Islands</option>
<option>New Caledonia</option>
<option>Vanuatu</option>
<option>Fiji</option>
<option>New Zealand - Wellington (+12/+13)</option>
<option>Samoa</option>
<option>Tonga</option>
<option>Kiribati - Tarawa</option>
<option>Kiribati - Kiritimati (+14:00)</option>
<option>Marshall Islands</option>
<option>Micronesia - Pohnpei</option>
<option>Micronesia - Chuuk</option>
<option>Nauru</option>
<option>Tuvalu</option>
<option>Wallis and Futuna</option>
<option>French Polynesia - Tahiti</option>
<option>Cook Islands</option>
<option>American Samoa</option>
<option>Niue</option></select>
            </div>
            <div><label>Hour (optional)</label>
              <select id="b-hour"><option value="">Unknown</option>
<option value="00:00">Zi (23:00–01:00)</option>
<option value="02:00">Chou (01:00–03:00)</option>
<option value="04:00">Yin (03:00–05:00)</option>
<option value="06:00">Mao (05:00–07:00)</option>
<option value="08:00">Chen (07:00–09:00)</option>
<option value="10:00">Si (09:00–11:00)</option>
<option value="12:00" selected>Wu (11:00–13:00)</option>
<option value="14:00">Wei (13:00–15:00)</option>
<option value="16:00">Shen (15:00–17:00)</option>
<option value="18:00">You (17:00–19:00)</option>
<option value="20:00">Xu (19:00–21:00)</option>
<option value="22:00">Hai (21:00–23:00)</option></select>
            </div>
            <div><label>Year</label><input id="b-y" type="number" min="1900" max="2100" placeholder="1990"></div>
            <div><label>Month</label><input id="b-m" type="number" min="1" max="12" placeholder="8"></div>
            <div><label>Day</label><input id="b-d" type="number" min="1" max="31" placeholder="20"></div>
          </div>
        </div>
      </div>
      <div style="margin-top:12px"><button id="calc">Calculate Score</button></div>
      <div id="score" style="margin-top:14px;font-size:22px;font-weight:800"></div>
      <div id="explain" class="small" style="margin-top:8px"></div>
    </section>

    <section class="card small">
      <b>Note</b>: We use local civil date; hour optional. Country is for future time‑zone refinement.
    </section>
  </div>

  <script src="./partner_match.js"></script>
  <script>
    const setErr=(m)=>{const e=document.getElementById('err');e.textContent=m;e.style.display='block';}
    const clearErr=()=>{const e=document.getElementById('err');e.textContent='';e.style.display='none';}
    document.addEventListener('DOMContentLoaded',()=>{
      document.getElementById('calc').addEventListener('click',()=>{
        clearErr();
        const ay=parseInt(document.getElementById('a-y').value,10);
        const am=parseInt(document.getElementById('a-m').value,10);
        const ad=parseInt(document.getElementById('a-d').value,10);
        const ah=document.getElementById('a-hour').value;
        const by=parseInt(document.getElementById('b-y').value,10);
        const bm=parseInt(document.getElementById('b-m').value,10);
        const bd=parseInt(document.getElementById('b-d').value,10);
        const bh=document.getElementById('b-hour').value;
        if(!(ay&&am&&ad&&by&&bm&&bd)){ setErr('Please fill Year/Month/Day for both sides.'); return; }
        try{
          const A=buildPillars(ay,am,ad,ah), B=buildPillars(by,bm,bd,bh);
          const Ac=countsFromPillars(A), Bc=countsFromPillars(B);
          const det={a:{ds:A.d[0],db:A.d[1]}, b:{ds:B.d[0],db:B.d[1]}};
          const r=score(Ac,Bc,det);
          const label=r.total>=85?'Excellent':r.total>=70?'Good':r.total>=50?'Neutral':'Challenging';
          document.getElementById('score').textContent='Score: '+r.total+' / 100 — '+label;
          const bullets=[];
          bullets.push('You lack: '+r.domA.least+' | Partner strong: '+r.domB.most);
          bullets.push('Balance bonus: '+r.detail.balance);
          if(r.detail.rel>=12) bullets.push('Heavenly combination — long-term harmony');
          else if(r.detail.rel>=6) bullets.push('Six-harmony — good chemistry');
          bullets.push('Day-stem relation: '+r.detail.stemScore);
          document.getElementById('explain').innerHTML=bullets.map(x=>'• '+x).join('<br>');
        }catch(err){ setErr(err.message||String(err)); }
      });
    });
  </script>
  <script>
/* Prioritize popular countries at the top (without losing the 200+ full list) */
(function(){
  // 精确写“选项文字”，和下拉里的文本一致
  const POPULAR = [
    "China",
    "USA - New York (-300/-240)", "USA - Los Angeles (-480/-420)",
    "United Kingdom",
    "Hong Kong", "Taiwan", "Singapore",
    "Japan", "South Korea",
    "Canada - Toronto (-300/-240)", "Canada - Vancouver (-480/-420)",
    "Australia - Sydney (+10:00/+11:00)",
    "India", "Germany", "France", "Italy", "Spain"
  ];

  function prioritize(select){
    if(!select) return;
    const all = Array.from(select.options);
    // 构建 Popular 分组
    const popularGroup = document.createElement('optgroup');
    popularGroup.label = "— Popular —";
    const seen = new Set();

    POPULAR.forEach(txt => {
      const opt = all.find(o => o.text.trim() === txt);
      if (opt && !seen.has(txt)) {
        popularGroup.appendChild(opt.cloneNode(true));
        seen.add(txt);
      }
    });

    // 其余保持原有顺序，去重
    const restFrag = document.createDocumentFragment();
    all.forEach(o => { if (!seen.has(o.text.trim())) restFrag.appendChild(o.cloneNode(true)); });

    // 重建
    select.innerHTML = "";
    if (popularGroup.children.length) select.appendChild(popularGroup);
    select.appendChild(restFrag);

    // 可选：默认选中 China（或注释掉保持原默认）
    // if (!select.value && POPULAR[0]) select.value = POPULAR[0];
  }

  document.addEventListener('DOMContentLoaded', function(){
    ["ff-country","a-country","b-country","country"].forEach(id => prioritize(document.getElementById(id)));
  });
})();
</script>

</body>
</html>
