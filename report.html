<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Report</title><link rel="stylesheet" href="styles.css">
<style>
.lock{filter:blur(2px);opacity:.7;pointer-events:none}
.cta{margin-top:14px;padding:14px;border:1px dashed #355a9a;border-radius:12px;background:rgba(30,47,87,.25)}
.cta h3{margin:0 0 8px 0}
.bullets{margin:0 0 0 18px}
.subsec{margin-top:14px}
.kv{display:flex;gap:8px;flex-wrap:wrap}
.kv .tag{background:#203052;border:1px solid #2a3d63;padding:4px 8px;border-radius:999px}
h3{margin:8px 0}
</style>
</head><body>
<div class="topbar no-print"><div class="container row">
  <div class="brand">FortuneFlow</div>
  <nav>
    <a href="index.html">Home</a>
    <a href="pricing.html">Pricing</a>
    <a href="account.html">Account</a>
    <a href="report.html">Report</a>
  </nav>
</div></div>

<div class="container">
  <h1>Report</h1>
  <section class="card">
    <div class="no-print" style="margin-bottom:10px">
      <a class="button" href="index.html">Back to Home</a>
      <button onclick="window.print()">Download / Print</button>
    </div>
    <div id="r-pillars" class="mono"></div>
    <div id="r-elements"></div>
    <div id="r-lucky" class="mono" style="margin-top:8px"></div>

    <div id="pro-wrap">
      <div id="pro-sections" class="">
        <div class="subsec"><h3>Career Fit</h3><div id="career-good" class="kv"></div></div>
        <div class="subsec"><h3>Use Caution</h3><div id="career-caution" class="kv"></div></div>
        <div class="subsec"><h3>Strengths & Risks</h3><div id="strengths" class="kv"></div><div id="risks" class="kv" style="margin-top:6px"></div></div>
        <div class="subsec"><h3>Ideal Partner Match</h3><ul id="partner-bullets" style="margin:0 0 0 18px"></ul></div>
        <div class="subsec"><h3>Lucky Windows</h3><div id="windows" class="kv"></div></div>
      </div>
      <div id="cta" class="cta" style="display:none">
        <h3>üîç Want to know this?</h3>
        <ul class="bullets">
          <li><b>Your ideal partner type</b> (by elements)</li>
          <li><b>How you complement each other</b> ‚Äî strengths you bring, gaps they fill</li>
          <li><b>How to catch opportunities</b> and sidestep risks in the next 12 months</li>
        </ul>
        <div style="margin-top:10px">
          <a id="cta-btn" class="button" href="pricing.html?from=report">Unlock your match</a>
          <div class="muted" style="margin-top:8px;font-size:13px">Daily plan just <b>$1/day</b>. Cancel anytime.</div>
        </div>
      </div>
    </div>

    <div class="print-only" style="margin-top:8px"><small>Generated by FortuneFlow</small></div>
  </section>
</div>
<script>
function renderReportTable(counts){
  const table=document.createElement('table');
  table.innerHTML='<thead><tr><th>Five Elements</th><th style=\"text-align:right\">#</th></tr></thead>';
  const tb=document.createElement('tbody');
  ['Wood','Fire','Earth','Metal','Water'].forEach(k=>{ const tr=document.createElement('tr'); tr.innerHTML='<td>'+k+'</td><td style=\"text-align:right\">'+(counts[k]||0)+'</td>'; tb.appendChild(tr); });
  table.appendChild(tb); const host=document.getElementById('r-elements'); host.innerHTML=''; host.appendChild(table);
}
function isPaid(){ try{ const subs=JSON.parse(localStorage.getItem('ff_subs')||'[]'); if(Array.isArray(subs)&&subs.length>0) return true; }catch(e){} return !!localStorage.getItem('ff_last_plan'); }
function topElement(counts){ return Object.entries(counts).sort((a,b)=>b[1]-a[1])[0][0]; }
function lowElement(counts){ return Object.entries(counts).sort((a,b)=>b[1]-a[1]).slice(-1)[0][0]; }

const CAREERS = {
  Wood:  ["Education","Healthcare","Publishing","Non‚Äëprofit","Sustainable design","Humanities","Counseling"],
  Fire:  ["Marketing","Entertainment","Culinary","Sales","Public speaking","PR","Events"],
  Earth: ["Operations","Real estate","HR","Agriculture","Supply chain","Project management","Construction"],
  Metal: ["Finance","Law","Engineering","Manufacturing","Quality control","Compliance","Data governance"],
  Water: ["Tech R&D","Consulting","Logistics","Trading","Research/analysis","Maritime","Freight"]
};
const CAUTION = {
  Wood:  ["Highly speculative trading","Cut‚Äëthroat sales w/ no support"],
  Fire:  ["Back‚Äëoffice repetitive work","Long isolation roles"],
  Earth: ["Constant travel gigs","Unstructured early‚Äëstage chaos"],
  Metal: ["Unregulated ventures","Ambiguous ownership/responsibility"],
  Water: ["Rigid bureaucracy","Over‚Äëcontrolled environments"]
};
const STRENGTHS = {
  Wood:["Growth mindset","Empathy","Planning","Mentoring"],
  Fire:["Visibility","Momentum","Storytelling","Inspiring others"],
  Earth:["Reliability","Patience","Execution","Stability"],
  Metal:["Discipline","Standards","Precision","Integrity"],
  Water:["Strategy","Adaptability","Insight","Learning speed"]
};
const RISKS = {
  Wood:["Over‚Äëcommitting","People‚Äëpleasing","Boundary blurring"],
  Fire:["Burnout","Impulsiveness","Attention diffusion"],
  Earth:["Over‚Äëcautious","Stagnation","Slow to pivot"],
  Metal:["Rigidity","Perfectionism","Harsh self‚Äëcritique"],
  Water:["Indecision","Over‚Äëanalysis","Detached communication"]
};
        
function luckyBy(key){ const map={Wood:['green','cyan'], Fire:['red','orange'], Earth:['yellow','brown'], Metal:['white','silver','gold'], Water:['black','blue','navy']}

function dominance(counts){
  const entries = Object.entries(counts).sort((a,b)=>b[1]-a[1]);
  const most = entries[0][0], least = entries[entries.length-1][0];
  const gap = entries[0][1] - entries[entries.length-1][1];
  const avg = entries.reduce((s,kv)=>s+kv[1],0)/entries.length;
  const variance = entries.reduce((s,kv)=>s + Math.pow(kv[1]-avg,2), 0)/entries.length;
  const balanced = variance < 1.2; // heuristic: smaller variance => balanced chart
  return {most, least, gap, balanced};
}
function dynamicActions(dom){
  const tips = [];
  // Generic balance guidance
  if(dom.balanced){
    tips.push("You‚Äôre relatively balanced ‚Äî double down on your strongest edge for visible wins.");
  } 
function partnerMatchByElements(least, most){
  // Map weakest element -> complementary partner elements (2 choices)
  const pairs = {
    Wood:  { elements:["Fire","Water"], traits:["Warm & expressive","Strategic & supportive"] },
    Fire:  { elements:["Earth","Wood"], traits:["Grounded & reliable","Growth-minded & empathetic"] },
    Earth: { elements:["Metal","Fire"], traits:["Principled & disciplined","Energetic & visible"] },
    Metal: { elements:["Water","Earth"], traits:["Adaptive & insightful","Stable & patient"] },
    Water: { elements:["Wood","Metal"], traits:["Nurturing & growth-oriented","Orderly & trustworthy"] }
  };
  const pick = pairs[least] || {elements:[most], traits:["Balanced personality"]};
  return pick;
}
function buildPartnerBullets(dom){
  const rec = partnerMatchByElements(dom.least, dom.most);
  const bullets = [];
  bullets.push("Best elemental match: " + rec.elements.join(" or "));
  if(dom.gap >= 3){
    bullets.push("You benefit from a partner who brings balance and structure.");
  } else {
    bullets.push("You pair well with someone who amplifies your strengths without creating imbalance.");
  }
  // Traits
  rec.traits.forEach(t => bullets.push("Look for traits: " + t));
  // Practical tip
  bullets.push("First date cue: choose colors linked to your weakest element for harmony.");
  return bullets.slice(0,5);
}
else {
    tips.push("Rebalance first: add small daily habits that favor your weakest element.");
  }
  // By weakest element
  const weak = dom.least;
  const add = (t)=>tips.push(t);
  if(weak==='Wood'){ add("Schedule weekly learning/mentoring to grow your pipeline of ideas."); add("Say no to low‚Äëleverage tasks to keep energy focused."); }
  if(weak==='Fire'){ add("Increase outward exposure: present, post, or pitch once this week."); add("Use warm colors/accessories to raise visibility and confidence."); }
  if(weak==='Earth'){ add("Create a simple routine and review checklist; protect deep‚Äëwork blocks."); add("Group similar tasks to build momentum and reduce switching."); }
  if(weak==='Metal'){ add("Define ‚Äòdone‚Äô with clear standards before starting; write your acceptance criteria."); add("Automate one repetitive task to enforce consistency."); }
  if(weak==='Water'){ add("Do a 30‚Äëminute strategy session before major decisions."); add("Prototype quickly and seek feedback to avoid over‚Äëanalysis."); }
  // By dominance gap (how uneven)
  if(dom.gap >= 3){ tips.push("Big gap detected ‚Äî keep decisions simple and cadence weekly to avoid swings."); }
  return tips.slice(0,5);
}
function dynamicCareer(most){
  return (CAREERS[most]||[]).slice(0,6);
}
function dynamicCaution(least){
  return (CAUTION[least]||[]).slice(0,4);
}
function dynamicStrengthsRisks(most,least){
  return { s:(STRENGTHS[most]||[]).slice(0,4), r:(RISKS[least]||[]).slice(0,4) };
}

; return map[key]||[]; }
function tag(containerId, arr){ const host=document.getElementById(containerId); host.innerHTML=''; arr.forEach(t=>{ const span=document.createElement('span'); span.className='tag'; span.textContent=t; host.appendChild(span); }); }
document.addEventListener('DOMContentLoaded',()=>{
  const data = JSON.parse(localStorage.getItem('ff_result_en')||'null');
  if(!data){ document.getElementById('r-pillars').textContent='(No data. Go to Home and calculate first.)'; return; }
  renderReportTable(data.counts);
  const lucky = (data.lucky||[]).join(', ');
  document.getElementById('r-lucky').textContent = 'Lucky colors: ' + (lucky || '‚Äî');
  document.getElementById('r-pillars').textContent = 'Pillars: calculated on Home page';

  const paid = isPaid();
  const pro = document.getElementById('pro-sections');
  const cta = document.getElementById('cta');
  if(paid){
    pro.classList.remove('lock'); cta.style.display='none';
    const most = topElement(data.counts); const least = lowElement(data.counts);
    tag('career-good', CAREERS[most]||[]); tag('career-caution', CAUTION[least]||[]);
    tag('strengths', STRENGTHS[most]||[]); tag('risks', RISKS[least]||[]);
    const ul=document.getElementById('actions'); ul.innerHTML='';
    ['Schedule key calls when you have high energy (morning or after workout).','Batch routine tasks into one focused block (45‚Äì60 min).','Make one small step that favors your weakest element (build balance).'].forEach(t=>{ const li=document.createElement('li'); li.textContent=t; ul.appendChild(li); });
    const lw=(luckyBy(least)||[]).slice(0,2).map(c=>'Color boost: '+c); tag('windows', lw);
  } else {
    pro.classList.add('lock'); cta.style.display='block';
  }
});
</script>
</body></html>